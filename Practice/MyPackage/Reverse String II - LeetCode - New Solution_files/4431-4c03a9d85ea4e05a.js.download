(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4431],{78581:e=>{var l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"followUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"followUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userSlug"},value:{kind:"Variable",name:{kind:"Name",value:"userSlug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ok"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:101}};l.loc.source={body:"mutation followUser($userSlug: String!) {\n  followUser(userSlug: $userSlug) {\n    ok\n    error\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function n(e,l){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==l)return n}}l.definitions.forEach(function(e){if(e.name){var l=new Set;(function e(l,i){if("FragmentSpread"===l.kind)i.add(l.name.value);else if("VariableDefinition"===l.kind){var n=l.type;"NamedType"===n.kind&&i.add(n.name.value)}l.selectionSet&&l.selectionSet.selections.forEach(function(l){e(l,i)}),l.variableDefinitions&&l.variableDefinitions.forEach(function(l){e(l,i)}),l.definitions&&l.definitions.forEach(function(l){e(l,i)})})(e,l),i[e.name.value]=l}}),e.exports=l,e.exports.followUser=function(e,l){var o={kind:e.kind,definitions:[n(e,l)]};e.hasOwnProperty("loc")&&(o.loc=e.loc);var t=i[l]||new Set,s=new Set,a=new Set;for(t.forEach(function(e){a.add(e)});a.size>0;){var r=a;a=new Set,r.forEach(function(e){s.has(e)||(s.add(e),(i[e]||new Set).forEach(function(e){a.add(e)}))})}return s.forEach(function(l){var i=n(e,l);i&&o.definitions.push(i)}),o}(l,"followUser")},35690:e=>{var l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"unfollowUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unfollowUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userSlug"},value:{kind:"Variable",name:{kind:"Name",value:"userSlug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ok"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:105}};l.loc.source={body:"mutation unfollowUser($userSlug: String!) {\n  unfollowUser(userSlug: $userSlug) {\n    ok\n    error\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function n(e,l){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==l)return n}}l.definitions.forEach(function(e){if(e.name){var l=new Set;(function e(l,i){if("FragmentSpread"===l.kind)i.add(l.name.value);else if("VariableDefinition"===l.kind){var n=l.type;"NamedType"===n.kind&&i.add(n.name.value)}l.selectionSet&&l.selectionSet.selections.forEach(function(l){e(l,i)}),l.variableDefinitions&&l.variableDefinitions.forEach(function(l){e(l,i)}),l.definitions&&l.definitions.forEach(function(l){e(l,i)})})(e,l),i[e.name.value]=l}}),e.exports=l,e.exports.unfollowUser=function(e,l){var o={kind:e.kind,definitions:[n(e,l)]};e.hasOwnProperty("loc")&&(o.loc=e.loc);var t=i[l]||new Set,s=new Set,a=new Set;for(t.forEach(function(e){a.add(e)});a.size>0;){var r=a;a=new Set,r.forEach(function(e){s.has(e)||(s.add(e),(i[e]||new Set).forEach(function(e){a.add(e)}))})}return s.forEach(function(l){var i=n(e,l);i&&o.definitions.push(i)}),o}(l,"unfollowUser")},76547:(e,l,i)=>{"use strict";i.d(l,{o:()=>n});var n=function(e){return e.Normal="NORMAL",e.Official="OFFICIAL",e}({})},86295:(e,l,i)=>{"use strict";i.d(l,{w:()=>n});let n=(0,i(49825).p)({isFollowersTab:!1,followListVisible:!1,followingCount:0,followersCount:0,followerUsers:[],followingUsers:[],pageNum:0,haveFollowed:!1})},24516:(e,l,i)=>{"use strict";i.d(l,{K:()=>s,l:()=>a});var n=i(35593),o=i(86474),t=i(9640);let s=(e,l)=>{e.invalidateQueries(o.jfv.getKey({slugs:[l]}))},a=e=>(0,n.XO0)(t.nS,{username:e})},60140:(e,l,i)=>{"use strict";i.d(l,{T:()=>w});var n=i(77528),o=i(55456),t=i(35690),s=i.n(t),a=i(78581),r=i.n(a),d=i(9640),u=i(51559),c=i(11377),f=i(25350),v=i(86295);let m=e=>{u.i.error(e||"Failed!!")},w=(e,l,i)=>{let{appState:{followingUsers:t,followingCount:a,followersCount:u,followerUsers:w,isFollowersTab:p},setAppState:g}=(0,v.w)(),x=(0,c.a)();return{mutateAsync:async()=>{try{var c,v,h,S,k,N,y,j,U,b,F,_,C,D,M,A,O,B,E,T;if(i){if(x){if(p){if(l){let l=await d.nS.request(s(),{userSlug:e});(null===(k=l.unfollowUser)||void 0===k?void 0:k.ok)?g({followerUsers:w.map(l=>l.userSlug===e?(0,o._)((0,n._)({},l),{isFollowedByMe:!1,isMutualFollowing:!1}):l),followingUsers:t.map(l=>l.userSlug!==e||l.isCompany?l:(0,o._)((0,n._)({},l),{isFollowedByMe:!1,isMutualFollowing:!1})),followingCount:a-1}):m(null===(N=l.unfollowUser)||void 0===N?void 0:N.error)}else{let l=await d.nS.request(r(),{userSlug:e});if(null===(y=l.followUser)||void 0===y?void 0:y.ok){let l=w.map(l=>l.userSlug===e?(0,o._)((0,n._)({},l),{isFollowedByMe:!0,isMutualFollowing:!1}):l);g({followerUsers:l,followingUsers:t.find(l=>l.userSlug===e)?t.map(l=>l.userSlug===e?(0,o._)((0,n._)({},l),{isFollowedByMe:!0,isMutualFollowing:!1}):l):[l.find(l=>l.userSlug===e),...t],followingCount:a+1})}else m(null===(j=l.followUser)||void 0===j?void 0:j.error)}}else if(l){let l=await d.nS.request(s(),{userSlug:e});(null===(U=l.unfollowUser)||void 0===U?void 0:U.ok)?g({followerUsers:w.map(l=>l.userSlug===e?(0,o._)((0,n._)({},l),{isFollowedByMe:!1,isMutualFollowing:!1}):l),followingUsers:t.map(l=>l.userSlug!==e||l.isCompany?l:(0,o._)((0,n._)({},l),{isFollowedByMe:!1,isMutualFollowing:!1})),followingCount:a-1}):m(null===(b=l.unfollowUser)||void 0===b?void 0:b.error)}else{let l=await d.nS.request(r(),{userSlug:e});(null===(F=l.followUser)||void 0===F?void 0:F.ok)?g({followingUsers:t.map(l=>l.userSlug!==e||l.isCompany?l:(0,o._)((0,n._)({},l),{isFollowedByMe:!0})),followerUsers:w.map(l=>l.userSlug===e?(0,o._)((0,n._)({},l),{isFollowedByMe:!0,isMutualFollowing:!0}):l),followingCount:a+1}):m(null===(_=l.followUser)||void 0===_?void 0:_.error)}}else if(p){if(l){let l=await d.nS.request(s(),{userSlug:e});(null===(C=l.unfollowUser)||void 0===C?void 0:C.ok)?g({followerUsers:w.map(l=>l.userSlug===e?(0,o._)((0,n._)({},l),{isFollowedByMe:!1,isMutualFollowing:!1}):l)}):m(null===(D=l.unfollowUser)||void 0===D?void 0:D.error)}else{let l=await d.nS.request(r(),{userSlug:e});(null===(M=l.followUser)||void 0===M?void 0:M.ok)?g({followerUsers:w.map(l=>l.userSlug===e?(0,o._)((0,n._)({},l),{isFollowedByMe:!0}):l)}):m(null===(A=l.followUser)||void 0===A?void 0:A.error)}}else if(l){let l=await d.nS.request(s(),{userSlug:e});(null===(O=l.unfollowUser)||void 0===O?void 0:O.ok)?g({followingUsers:t.map(l=>l.userSlug===e?(0,o._)((0,n._)({},l),{isFollowedByMe:!1,isMutualFollowing:!1}):l)}):m(null===(B=l.unfollowUser)||void 0===B?void 0:B.error)}else{let l=await d.nS.request(r(),{userSlug:e});(null===(E=l.followUser)||void 0===E?void 0:E.ok)?g({followingUsers:t.map(l=>l.userSlug===e?(0,o._)((0,n._)({},l),{isFollowedByMe:!0}):l)}):m(null===(T=l.followUser)||void 0===T?void 0:T.error)}}else if(l){let l=await d.nS.request(s(),{userSlug:e});(null===(c=l.unfollowUser)||void 0===c?void 0:c.ok)?g({haveFollowed:!1,followersCount:u-1}):m(null===(v=l.unfollowUser)||void 0===v?void 0:v.error)}else{let l=await d.nS.request(r(),{userSlug:e});(null===(h=l.followUser)||void 0===h?void 0:h.ok)?g({haveFollowed:!0,followersCount:u+1}):m(null===(S=l.followUser)||void 0===S?void 0:S.error)}}catch(e){(0,f.defaultErrorHandler)(e)}}}}},78799:(e,l,i)=>{"use strict";i.d(l,{d:()=>d,s:()=>u});var n=i(77528),o=i(55456),t=i(35593),s=i(86474),a=i(9640),r=i(76547);let d=(e,l)=>(0,s.Qmq)(a.nS,{userSlug:e},l),u=(e,l)=>(0,t.dk5)(a.nS,{username:e},(0,o._)((0,n._)({},l),{select:e=>{if(!e.matchedUser)return null;let{profile:l,username:i,contestBadge:n,githubUrl:o,twitterUrl:t,linkedinUrl:s}=e.matchedUser,{ugcArticleUserSolutionArticles:{totalNum:a},ugcArticleUserDiscussionArticles:{totalNum:d}}=e;return{username:i,githubUrl:o||"",twitterUrl:t||"",linkedinUrl:s||"",contestBadge:{name:(null==n?void 0:n.name)||"",icon:(null==n?void 0:n.icon)||"",expired:!!(null==n?void 0:n.expired),hoverText:(null==n?void 0:n.hoverText)||""},userAvatar:(null==l?void 0:l.userAvatar)||"",ranking:(null==l?void 0:l.ranking)||0,realName:(null==l?void 0:l.realName)||"",aboutMe:(null==l?void 0:l.aboutMe)||"",school:(null==l?void 0:l.school)||"",websites:(null==l?void 0:l.websites)||[],countryName:(null==l?void 0:l.countryName)||"",company:(null==l?void 0:l.company)||"",jobTitle:(null==l?void 0:l.jobTitle)||"",skillTags:(null==l?void 0:l.skillTags)||[],postViewCount:(null==l?void 0:l.postViewCount)||0,postViewCountDiff:(null==l?void 0:l.postViewCountDiff)||0,reputation:(null==l?void 0:l.reputation)||0,reputationDiff:(null==l?void 0:l.reputationDiff)||0,solutionCount:a||0,solutionCountDiff:(null==l?void 0:l.solutionCountDiff)||0,categoryDiscussCount:d||0,categoryDiscussCountDiff:(null==l?void 0:l.categoryDiscussCountDiff)||0,isOfficialCertification:(null==l?void 0:l.certificationLevel)===r.o.Official,isFollowingMe:(null==l?void 0:l.isFollowedByMe)||!1,isFollowedByMe:(null==l?void 0:l.isFollowedByMe)||!1}}}))},93031:(e,l,i)=>{"use strict";i.d(l,{a:()=>T,_:()=>V});var n=i(74848),o=i(21308),t=i(86715),s=i(96540),a=i(79656),r=i(78799),d=i(60140),u=i(76033),c=i(77528),f=i(55456),v=i(4418),m=i(47197),w=i(82479);let p=m.bL,g=m.l9,x=m.ZL,h=e=>{var{ref:l,className:i,align:o="center",sideOffset:t=8,collisionPadding:s=8}=e,a=(0,v._)(e,["ref","className","align","sideOffset","collisionPadding"]);return(0,n.jsx)(m.UC,(0,c._)({ref:l,align:o,sideOffset:t,collisionPadding:s,className:(0,w.xF)("bg-sd-popover text-sd-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 rounded-sd-md border-sd-border z-modal border p-4 shadow-md outline-none",i)},a))};h.displayName=m.UC.displayName;let S=e=>{var{defaultOpen:l,open:i,onOpenChange:o,openDelay:t,closeDelay:s,children:a,content:r}=e,d=(0,v._)(e,["defaultOpen","open","onOpenChange","openDelay","closeDelay","children","content"]);return(0,n.jsxs)(p,{defaultOpen:l,open:i,onOpenChange:o,openDelay:t,closeDelay:s,children:[(0,n.jsx)(g,{asChild:!0,children:a}),(0,n.jsx)(x,{children:(0,n.jsx)(h,(0,f._)((0,c._)({},d),{children:r}))})]})};var k=i(9935),N=i(53882),y=i(50212),j=i(24516),U=i(70354),b=i(91039),F=i(72187),_=i(15685),C=i(84038),D=i(3519);let M=e=>{let{realName:l,username:i,badgeIcon:o,badgeName:t,badgeClassName:s,userClassName:a,isOfficialCertification:r}=e,{t:d}=(0,C.Bd)("common");return(0,n.jsxs)("div",{className:"flex w-full items-center gap-1 truncate",translate:"no",children:[(0,n.jsx)("div",{className:(0,w.xF)("text-sd-foreground max-w-[100px] overflow-hidden text-ellipsis text-base font-semibold md:max-w-[200px]",a),children:l||i}),r&&(0,n.jsx)(D.m_,{label:d("verified"),placement:"top",children:(0,n.jsx)("div",{children:(0,n.jsx)(u.d,{variant:"14px",padding:"none",icon:_.Zsp,className:(0,w.xF)("text-sd-blue-500")})})}),o&&t&&(0,n.jsx)(D.m_,{label:t,placement:"top",children:(0,n.jsx)("div",{className:(0,w.xF)("h-3.5 w-3.5",s),children:(0,n.jsx)("img",{src:o,alt:t,className:"h-full w-full"})})})]})},A=()=>(0,n.jsx)("div",{className:"flex h-[118px] items-center justify-center",children:(0,n.jsx)(y.R,{})}),O=e=>{let{name:l,value:i}=e;return(0,n.jsxs)("div",{className:"flex flex-col items-center gap-0.5",children:[(0,n.jsx)("div",{className:"text-sd-muted-foreground text-xs",children:l}),(0,n.jsx)("div",{className:"text-sd-foreground text-base font-semibold",children:i})]})},B=e=>{var l,i,c,f,v,m;let{userSlug:p}=e,[g,x]=(0,s.useState)(!1),h=(0,t.useRouter)(),{data:S,isInitialLoading:y,refetch:_}=(0,r.s)(p),C=null===(c=(0,j.l)(p))||void 0===c?void 0:null===(i=c.data)||void 0===i?void 0:null===(l=i.matchedUser)||void 0===l?void 0:l.activeBadge,{isSignedIn:D,username:B}=null!==(m=null===(v=(0,U.Xe)())||void 0===v?void 0:null===(f=v.data)||void 0===f?void 0:f.userStatus)&&void 0!==m?m:{},E=!!(null==S?void 0:S.isFollowedByMe),T=B===p,{mutateAsync:V}=(0,d.T)(p,E,!1),q=(0,s.useCallback)(async()=>{if(!g){if(!D){h.push(F.f0.signIn(location.href));return}if(p){x(!0);try{await V(),await _(),x(!1)}catch(e){x(!1)}}}},[g,D,p,h,V,_]);return y?(0,n.jsx)(A,{}):S?(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)(k.T,{src:S.userAvatar,alt:"",className:"h-[60px] w-[60px] shrink-0 overflow-hidden rounded-md object-cover"}),(0,n.jsxs)("div",{className:"flex flex-col gap-1 overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex flex-col items-start",children:[(0,n.jsx)(M,{realName:S.realName,username:S.username,badgeIcon:(null==C?void 0:C.icon)||"",badgeName:(null==C?void 0:C.name)||"",reputation:S.reputation,isOfficialCertification:S.isOfficialCertification,userClassName:"flex-1"}),(0,n.jsx)("div",{className:"text-sd-muted-foreground text-xs",children:S.username})]}),(0,n.jsxs)("div",{className:"flex gap-1",children:[(0,n.jsx)("div",{className:"text-sd-muted-foreground text-xs font-semibold",children:"Rank"}),(0,n.jsx)("div",{className:"text-sd-green-500 text-xs font-semibold",children:(0,o.Ay)(S.ranking)})]})]})]}),(0,n.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,n.jsx)(O,{name:"Views",value:(0,o.Ay)(S.postViewCount)}),(0,n.jsx)(O,{name:"Votes",value:(0,o.Ay)(S.reputation)}),(0,n.jsx)(O,{name:"Discuss",value:(0,o.Ay)(S.categoryDiscussCount)}),(0,n.jsx)(O,{name:"Solution",value:(0,o.Ay)(S.solutionCount)})]}),!T&&(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)("div",{className:"flex w-full",children:(0,n.jsx)(N.$,{onClick:q,variant:"".concat(E?"secondary":"primary"),className:(0,w.xF)("group ml-1 flex w-full justify-center text-sm font-medium",{"cursor-wait opacity-50":g}),children:E?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{className:"flex items-center gap-2 group-hover:hidden",children:[(0,n.jsx)(u.d,{icon:a.e68}),"Followed"]}),(0,n.jsxs)("span",{className:"text-sd-red-400 hidden items-center gap-2 group-hover:flex",children:[(0,n.jsx)(u.d,{icon:a.yYc,className:(0,w.xF)("hidden transition-none group-hover:block")}),"UnFollow"]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.u,{className:"mr-2"}),"Follow"]})})})})]}):null},E=e=>{let{userSlug:l,children:i}=e;return l?(0,n.jsx)(S,{className:"w-[310px] p-4 shadow-lg",content:(0,n.jsx)(B,{userSlug:l}),openDelay:200,onClick:e=>{e.preventDefault(),e.stopPropagation()},align:"start",children:i}):(0,n.jsx)(n.Fragment,{children:i})},T=E,V=E},76429:(e,l,i)=>{"use strict";i.d(l,{e:()=>r});var n=i(74848),o=i(32485),t=i.n(o);i(96540);var s=i(9935);let a="/_next/static/images/default_avatar-e9984af6de73f121d0e6801af2749ca5.jpg",r=e=>{let{ref:l,src:i="",alt:o="avatar",className:r}=e;return(0,n.jsx)(s.T,{ref:l,src:i||a,alt:o,errPlaceholder:a,className:t()("rounded-1/2 object-cover",r)})}},11377:(e,l,i)=>{"use strict";i.d(l,{a:()=>a});var n=i(86715),o=i(70354),t=i(78799);let s=e=>{let{data:l}=(0,t.s)(e||"",{enabled:!!e});return null==l?void 0:l.username},a=()=>{let{query:e}=(0,n.useRouter)(),l=s(e.username),{data:i}=(0,o.Xe)();if(!l||!i)return!1;let t=i.userStatus;return!!t&&!!t.isSignedIn&&t.username===l}},49825:(e,l,i)=>{"use strict";i.d(l,{p:()=>d,s:()=>r});var n=i(77528),o=i(55456),t=i(4418),s=i(96540),a=i(7282);let r=e=>{let[l,i]=(0,s.useReducer)((e,l)=>(0,n._)({},e,l),e);return{pageState:l,setPageState:i,resetPageState:l=>{l?i({[l]:e[l]}):i(e)},defaultPageState:e}},d=e=>{let l=(0,a.vt)(l=>(0,o._)((0,n._)({},e),{setAppState:e=>l(e)}));return()=>{let i=l(),{setAppState:n}=i;return{appState:(0,t._)(i,["setAppState"]),setAppState:n,resetAppState:l=>{l?n({[l]:e[l]}):n(e)},defaultAppState:e}}}}}]);